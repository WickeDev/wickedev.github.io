<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.24.7"/><style data-href="/styles.8c8cf53ef1b3ce55ca83.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#073642}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.resize{resize:both}.list-none{list-style-type:none}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(2rem*var(--tw-space-y-reverse));margin-top:calc(2rem*(1 - var(--tw-space-y-reverse)))}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pl-0{padding-left:0}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.grayscale{--tw-grayscale:grayscale(100%)}.filter,.grayscale{-webkit-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=53aa06cf17e4239d0dba6ffd09854e02" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=53aa06cf17e4239d0dba6ffd09854e02"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div><a href="/">홈</a><a href="/about">Who am I</a></div><div><h2>깃랩(Gitlab) CI/CD 튜토리얼</h2><hr/><div><p>깃랩(Gitlab)은 온프레미스 설치형 깃 호스팅으로 유명하고, 깃헙처럼 <a href="https://gitlab.com">웹서비스</a> 형태로도 사용이 가능합니다. 다만 깃헙이 선점 효과를 톡톡히 누리고 있는지라 만년 2인자 자리를 지키고 있죠. 깃랩의 장점이라면 CI/CD가 잘되어 있습니다. 심지어 설치형이 아니라도 public 레포인 경우 무료, private 레포인 경우 그룹 당 월 2000분(약 33.3시간)까지 무료입니다. 유료 플랜까지 가게되면 깃랩 안에서 모든걸 다 처리하라고 왠만한 솔루션 뺨치는 쿠버네티스 관리 보드까지 달아줍니다.</p>
<p>최근 깃헙도 이에 질세라 깃헙 액션을 베타로 공개했지만, 아직까지는 Circle CI, Travis CI 같은 외부 서비스를 사용하는게 일반적이죠</p>
<p>큰 그림을 보자면 깃랩의 CI/CD는 도커에서 돌아갑니다. 그리고 연결된 쿠버네티스에 배포됩니다. 프로젝트 루트에 .gitlab-ci.yml이 있는 상태로 새로운 푸시가 들어오면 일련의 파이프라인(Job 묶음)이 실행됩니다. 각 Job은 개발자의 선택에 달렸지만 보통은 아래와 같습니다.</p>
<ul>
<li>테스트: 유닛 테스트, 통합 테스트, E2E 테스트, 테스트 커버리지 측정</li>
<li>린트: 코드 퀄리티 측정, 코드 컨벤션 점검</li>
<li>빌드: 빌드, 번들링, Dockerfile 빌드 및 컨테이너 레지스트리 푸시</li>
<li>배포: Helm Chart, KNative Functions, KNative App(컨테이너) 배포</li>
</ul>
<h2>사전 지식</h2>
<ul>
<li>git</li>
<li>node (javascript)</li>
<li>docker</li>
<li>kubernetes</li>
</ul>
<h2>준비물</h2>
<ul>
<li>개인 도메인 (istio-ingressgateway 혹은 nginx-ingress 를 사용하기 위한)</li>
<li>깃랩 온프레미스 혹은 <a href="https://gitlab.com">gitlab.com</a> 계정</li>
<li>온프레미스일 경우 Gitlab Container Registry 활성화</li>
<li>온프레미스일 경우 Shared Runner 활성화 (Kubernetes를 통해 Specific Runner를 활성화 할수 있기 때문에 필수는 아님)</li>
<li>온프레미스 Kubernetes 혹은 <a href="https://cloud.google.com">GCP</a> 결제가 활성화된 구글 계정
<ul>
<li>만약 Kubernetes를 직접 리눅스 서버에 설치하실 경우 <a href="http://k3s.io">k3s</a>를 사용하시면 편리합니다. 다만 traefik이 포함되어 있으므로 깃랩의 Ingress 혹은 KNative(istio 포함) 연동을 할때 포트가 충돌하니 traefik 관련을 삭제해주어야 합니다.</li>
</ul>
</li>
</ul>
<h2>사전 준비</h2>
<p>저는 이 튜토리얼에서 온프레미스가 아닌 <a href="https://gitlab.com">gitlab.com</a> 을 사용합니다. 프로젝트 이름은 CI-CD-Tutorial로 지어줬습니다. 그리고 Create project를 눌러줍니다.</p>
<p><img src="https://images.velog.io/post-images/wickedev/8e567ca0-c665-11e9-be75-25da91e46b44/image.png" alt="image.png"></p>
<p>그 다음 <code class="language-text">Operations > Kubernetes > Add Kubernetes cluster</code> 에 들어가 GKE(Google Kubernetes Engine)를 연동합니다. GKE 연동을 하려면 구글 클라우드 결제(비용이 발생)가 활성화 되어 있어야하고, Kubernetes Engine 및 Compute Engine API를 활성화 시켜야합니다.</p>
<ul>
<li>GKE 연동시 가장 가까운 리전은 asia-northeast1이고, 권장 사양은 n1-standard-2 x 3대입니다. 약 월 20만원이지만 상단의 Apply for credit을 요청하면 2~300$ 크레딧을 제공합니다</li>
</ul>
<p>비용이 걱정된다면 남는 리눅스 서버에 Kubernetes 를 설치한 뒤 Add existing cluster 에서 연동할 수도 있습니다. <a href="https://medium.com/better-programming/using-a-k3s-kubernetes-cluster-for-your-gitlab-project-b0b035c291a9">Using a k3s Kubernetes Cluster for Your GitLab Project</a> 포스팅을 참조하여 연동하시면 됩니다. 다만 traefik 관련은 Ingress, KNative 연동시에 충돌이 나게되니 삭제합니다</p>
<p><img src="https://images.velog.io/post-images/wickedev/1b27ae60-c666-11e9-be75-25da91e46b44/image.png" alt="image.png"></p>
<p>연동 후 잠시 기다리면 아래와 같은 화면이 나옵니다. Base domain 에는 배포에 사용할 도메인(저는 제 도메인을 적었습니다)을 적고 Save changes를 눌러줍니다. 그 다음 Helm Tiller Install 을 눌러 설치합니다. Helm은 쿠버네티스 어플리케이션 메니저로써 클라이언트인 Helm, 서버인 Tiller(쿠버네티스에 설치되는) 로 구성되며, 구성을 정의한 Chart를 통해 쿠버네티스에 복잡한 구성의 서비스를 배포할 수 있습니다.</p>
<p><img src="https://images.velog.io/post-images/wickedev/4c289fe0-c668-11e9-be75-25da91e46b44/image.png" alt="image.png"></p>
<p>그 다음 필요에 따라 Prometheus, Cert-Manager 를 설치합니다. (몇몇 솔루션은 직접 설치했을 경우 PV(Persistent Volumes)가 필요하니 storageclass를 설정해 두는게 좋습니다) 만약 온프레미스 환경에서 Runner를 추가하지 않았다면, GitLab Runner 도 설치합니다,</p>
<p>그 다음이 중요한 부분인데, 2가지 선택지가 있습니다.</p>
<ul>
<li>Auto DevOps:
<ul>
<li>.gitlab-ci.yaml을 작성하지 않더라도 임의의 파이프 라인을 구성하여 배포</li>
<li>빌드, 코드 퀄리티, 테스트, 배포시 롤아웃, 퍼포먼스 테스트까지 구성</li>
<li>Helm Chart를 수정하여 배포되는데 기본으로 PostgresQL이 딸려옴</li>
<li>커스터마이즈의 어려움</li>
</ul>
</li>
</ul>
<p><img src="https://images.velog.io/post-images/wickedev/bf45be10-c66b-11e9-9bf5-35fb46f3128d/image.png" alt="image.png"></p>
<ul>
<li>KNative:
<ul>
<li>직접 .gitlab-ci.yaml을 작성함</li>
<li>Pivotal에서 개발한 kubernetes + istio 기반 서버리스 배포 환경</li>
<li>스테이징 환경 (실제 배포가 아닌 내부 배포) 구성에 용이함</li>
<li>KNative는 <a href="https://github.com/triggermesh/tm">tm</a>을 통해 배포되며, 현재 깃랩 버전에서는 subdomain을 지정할 수 없음
<ul>
<li>ci.ci-13952126-development.codesanctum.net 이런식</li>
</ul>
</li>
<li>커스터마이즈가 쉬움</li>
</ul>
</li>
</ul>
<p><img src="https://images.velog.io/post-images/wickedev/dd5c12f0-c66b-11e9-8ab7-c9e1be8adce2/image.png" alt="image.png"></p>
<p>만약 Auto DevOps를 사용하시려면 Ingress를 설치하시고, KNative를 사용하시려면 istio를 설치합니다. 왜냐하면 KNative가 istio를 사용하는데, Ingress는 nginx를 사용하기 때문에 포트가 쫑이납니다. istio-ingressgateway가 깔리느냐 nginx-ingress-controller가 깔리느냐 차이입니다. (물론 GKE를 쓰신다면 둘다 설치해도 퍼블릭 IP를 할당해주니 둘다 설치하셔도 됩니다)</p>
<p>어찌됐건 복잡한 배포를 하려면 yaml을 직접 작성해야하니, 뭘 선택하던 위에 두 방법은 못쓰므로 부담 없이 깔아줍시다. 저는 스테이징 환경 구성에 용이한 KNative를 선택하였습니다. 설치 후 잠시 기다리면 아래와 같이 보여지는데, Knative Endpoint를 와일드 카드 도메인의 A 레코드에 연결하고 Save changes 누르시면 됩니다.</p>
<p><img src="https://images.velog.io/post-images/wickedev/fa7a2fb0-c66c-11e9-90c7-471fa107ee07/image.png" alt="image.png"></p>
<p>다음은 배포시 사용할 Gitlab Container Registry를 위해 <code class="language-text">Settings > Repository > Deploy Tokens</code> 에 가서 아래와 같이 입력하고 Create deploy token을 눌러줍니다. 그리고 생성된 토큰과 패스워드는 따로 적어둡니다.</p>
<p><img src="https://images.velog.io/post-images/wickedev/af328790-c66d-11e9-8ab7-c9e1be8adce2/image.png" alt="image.png"></p>
<p>생성된 토큰과 패스워드는 <code class="language-text">Settings > CI/CD > Variables</code> 에 <code class="language-text">CI_DEPLOY_USER</code>, <code class="language-text">CI_DEPLOY_PASSWORD</code> 라는 키값으로 입력후 저장해주시면 됩니다.</p>
<p><img src="https://images.velog.io/post-images/wickedev/1b25b8f0-c66e-11e9-be75-25da91e46b44/image.png" alt="image.png"></p>
<p>이제 준비는 끝났습니다.</p>
<h2>프로젝트 작성</h2>
<p>저는 express node 서버를 작성하여, .gitlab-ci.yaml를 통해 CI/CD를 수행하여 Dockerfile을 통해 이미지를 빌드한 뒤 KNative serverless app(컨테이너)을 통해 배포할겁니다. 작성할 파일은 <code class="language-text">.gitignore</code>, <code class="language-text">.gitlab-ci.yml</code>, <code class="language-text">Dockerfile</code>, <code class="language-text">index.js</code>, <code class="language-text">package.json</code> 이렇게 5개 입니다. 적당히 프로젝트를 clone 하여 아래와 같이 작성후 push 합니다.</p>
<p>KNative는 서비스 노출에 8080 포트(Auto DevOps 의 경우 5000)를 사용합니다.</p>
<p>.gitignore</p>
<div class="gatsby-highlight" data-language=".gitignore"><pre class="language-.gitignore"><code class="language-.gitignore">.DS_Store
node_modules</code></pre></div>
<p>.gitlab-ci.yml</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>latest

<span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> test
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> deploy

<span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> node_modules/

<span class="token key atrule">include</span><span class="token punctuation">:</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span> Serverless.gitlab<span class="token punctuation">-</span>ci.yml

<span class="token key atrule">test</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> npm install
    <span class="token punctuation">-</span> npm test

<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">extends</span><span class="token punctuation">:</span> .serverless<span class="token punctuation">:</span>build<span class="token punctuation">:</span>image  

<span class="token key atrule">deploy_staging</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">extends</span><span class="token punctuation">:</span> .serverless<span class="token punctuation">:</span>deploy<span class="token punctuation">:</span>image

<span class="token key atrule">deploy_prod</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">extends</span><span class="token punctuation">:</span> .serverless<span class="token punctuation">:</span>deploy<span class="token punctuation">:</span>image
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> production
  <span class="token key atrule">when</span><span class="token punctuation">:</span> manual
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> master</code></pre></div>
<p>Dockerfile</p>
<div class="gatsby-highlight" data-language="dockerfile"><pre class="language-dockerfile"><code class="language-dockerfile"><span class="token comment"># This file is a template, and might need editing before it works on your project.</span>
<span class="token instruction"><span class="token keyword">FROM</span> node</span>

<span class="token instruction"><span class="token keyword">WORKDIR</span> /usr/src/app</span>

<span class="token instruction"><span class="token keyword">ARG</span> NODE_ENV</span>
<span class="token instruction"><span class="token keyword">ENV</span> NODE_ENV <span class="token variable">$NODE_ENV</span></span>

<span class="token instruction"><span class="token keyword">COPY</span> package.json /usr/src/app/</span>
<span class="token instruction"><span class="token keyword">RUN</span> npm install</span>

<span class="token instruction"><span class="token keyword">COPY</span> . /usr/src/app</span>

<span class="token comment"># replace this with your application's default port</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 8080</span>
<span class="token instruction"><span class="token keyword">CMD</span> [ <span class="token string">"npm"</span>, <span class="token string">"start"</span> ]</span></code></pre></div>
<p>index.js</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Gitlab!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Example app listening on port 8080!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>package.json</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"CI-CD-Tutorial"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"MIT"</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"node index.js"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"express"</span><span class="token operator">:</span> <span class="token string">"^4.17.1"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p><img src="https://images.velog.io/post-images/wickedev/182c8b40-c670-11e9-be75-25da91e46b44/image.png" alt="image.png"></p>
<p>푸시를 한 후 <code class="language-text">CI/CD > Pipelines</code>에 가면 해당 커밋에 대한 파이프라인이 도는 것을 보실 수 있습니다. 일부러 수동 배포도 넣어봤는데 궁금하시면 deploy_prod 옆에 화살표를 눌러보시면 배포가 되는 것을 보실 수 있습니다.</p>
<p><img src="https://images.velog.io/post-images/wickedev/daa9aae0-c670-11e9-90c7-471fa107ee07/image.png" alt="image.png"></p>
<p>여기서 배포된 express 앱은 <code class="language-text">Operations > Serverless</code> 에 들어가면 보여집니다.</p>
<p><img src="https://images.velog.io/post-images/wickedev/ff3fbf50-c672-11e9-aacc-27fa98fd5b32/image.png" alt="image.png"></p>
<p>접속해보니 잘 나오는군요.</p>
<p><img src="https://images.velog.io/post-images/wickedev/67e38980-c671-11e9-90c7-471fa107ee07/image.png" alt="image.png"></p>
<h2>마치며</h2>
<p>보통 CI 까지는 오픈소스나 개발 환경이 성숙한 회사에서 많이 접할 수 있지만, 사내에 숙련된 DevOps 기술자가 있지 않는 이상 CD까지 하기는 쉽지 않습니다. 하지만 Gitlab 처럼 CI/CD 를 한군데 잘 녹여낸 서비스라면 많은 개발자들이 쉽게 사용할 수 있을 것 같네요. 왜 MS가 Github을 인수했는지 알 것 같은 느낌이 듭니다.</p>
<p>만약 kubectl을 통한 직접 배포를 원하신다면 깃랩 CI가 <code class="language-text">KUBECONFIG</code> 환경 변수를 넘겨주니 이를 이용하시면 됩니다. 해보시고 안되는 부분은 댓글로 남겨주세요 :)</p>
<p>지금까지 작성한 코드는 <a href="https://gitlab.com/wickedev/ci-cd-tutorial">gitlab.com/wickedev/ci-cd-tutorial</a> 에 공개되어 있습니다.</p></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-WJH7T7BG1J', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/Gitlab-CICD-튜토리얼-bljzphditt";window.___webpackCompilationHash="58715758d3413ff85ad4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6f81d94acc65468c1004.js"],"app":["/app-1301b2c1ce1e6083a99e.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-e90e1f1a33ed14102c37.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-5192f944eb0cdbaead3e.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-758a4b63320540c0b598.js"]};/*]]>*/</script><script src="/polyfill-6f81d94acc65468c1004.js" nomodule=""></script><script src="/app-1301b2c1ce1e6083a99e.js" async=""></script><script src="/framework-97d5fbb8479584039b04.js" async=""></script><script src="/webpack-runtime-836278bcd2660a45111e.js" async=""></script></body></html>
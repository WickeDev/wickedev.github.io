<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.24.7"/><style data-href="/styles.8c8cf53ef1b3ce55ca83.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#073642}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.resize{resize:both}.list-none{list-style-type:none}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(2rem*var(--tw-space-y-reverse));margin-top:calc(2rem*(1 - var(--tw-space-y-reverse)))}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pl-0{padding-left:0}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.grayscale{--tw-grayscale:grayscale(100%)}.filter,.grayscale{-webkit-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=53aa06cf17e4239d0dba6ffd09854e02" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=53aa06cf17e4239d0dba6ffd09854e02"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div><a href="/">홈</a><a href="/about">Who am I</a></div><div><h2>[번역] Didact: DOM 엘리먼트 렌더링하기</h2><hr/><div><p><a href="https://velog.io/@wickedev/%EB%B2%88%EC%97%AD-Didact-%EC%9E%90%EC%8B%A0%EB%A7%8C%EC%9D%98-%EB%A6%AC%EC%95%A1%ED%8A%B8%EB%A5%BC-%EB%A7%8C%EB%93%9C%EB%8A%94-DIY-%EA%B0%80%EC%9D%B4%EB%93%9C">이 이야기는 단계별 리액트 DIY 시리즈의 일부입니다.</a></p>
<h3>DOM 리뷰</h3>
<p>시작하기 전에, 사용할 DOM API를 살펴봅시다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// Get an element by id</span>
<span class="token keyword">const</span> domRoot <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Create a new element given a tag name</span>
<span class="token keyword">const</span> domInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Set properties</span>
domInput<span class="token punctuation">[</span><span class="token string">"type"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"text"</span><span class="token punctuation">;</span>
domInput<span class="token punctuation">[</span><span class="token string">"value"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Hi world"</span><span class="token punctuation">;</span>
domInput<span class="token punctuation">[</span><span class="token string">"className"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"my-class"</span><span class="token punctuation">;</span>
<span class="token comment">// Listen to events</span>
domInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Create a text node</span>
<span class="token keyword">const</span> domText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Set text node content</span>
domText<span class="token punctuation">[</span><span class="token string">"nodeValue"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Foo"</span><span class="token punctuation">;</span>
<span class="token comment">// Append an element</span>
domRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Append a text node (same as previous)</span>
domRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domText<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><a href="https://gist.github.com/pomber/1cd4571481cbc9c3bbad560a764bb982#file-dom-js">gist</a>, <a href="https://codepen.io/pomber/pen/aWBLJR">codepen</a></p>
<p><a href="https://stackoverflow.com/questions/6003819/what-is-the-difference-between-properties-and-attributes-in-html">속성(attributes) 대신 엘리먼트 속성(element properties)을 설정</a>한다는 점에 유의하세요. 즉 유효한 속성(properties)만 허용된다는 의미입니다.</p>
<h3>Didact 엘리먼트들</h3>
<p>랜더링 할 필요가 있는 것이 무엇인지 설명하기 위해 일반 JS 오브젝트를 사용할 것 입니다. 그것을 Didact 엘리먼트들이라 부를 것 입니다. 이 엘리먼트는 <code class="language-text">type</code> 과 <code class="language-text">props</code>, 두 개의 필수 속성(properties)을 가집니다. <code class="language-text">type</code>은 문자열이거나 함수가 될 수 있지만, 추후 포스트에서 컴포넌트를 소개하기 전까지는 문자열 만을 사용할 겁니다. <code class="language-text">props</code>는 비어있을 수 있지만 null은 아닌 오브젝트입니다. <code class="language-text">props</code>는 Didact 엘리먼트들의 배열이 될 수 있는 <code class="language-text">children</code> 속성(property)을 가질 수 있습니다.</p>
<blockquote>
<p><em>Didact 엘리먼트를 많이 사용하게 될 것이므로, 지금부터는 줄여서 엘리먼트라 부를 것 입니다. HTML 엘리먼트와 혼동하지 않도록, 이것들은 DOM 엘리먼트, 혹은 변수 이름을 지을 때 그냥 <code class="language-text">dom</code> 엘리먼트라 하도록 하죠. (preact가 그랬듯이)</em></p>
</blockquote>
<p>예를 들어, 아래는 엘리먼트 입니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"div"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"container"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"text"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">"/bar"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"span"</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p><a href="https://gist.github.com/pomber/4d4e9490a9bc79b3666029c8d573139e#file-element-js">gist</a></p>
<p>아래는 DOM 엘리먼트입니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token string">"foo"</span> type<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"/bar"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
  <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre></div>
<p><a href="https://gist.github.com/pomber/4bc909aa07abfab357f5775bc525168a#file-element-html">gist</a></p>
<p>Didact 엘리먼트들은 리액트 엘리먼트와 매우 유사합니다. 하지만 일반적으로 여러분이 리액트를 사용할 때, 리액트 엘리먼트를 JS 객체로 만들지는 않을 겁니다. 아마도 여러분은 JSX 혹은 <code class="language-text">createElement</code>를 사용하겠죠. Didact에서도 동일하지만, 다음 시리즈의 포스트를 위해 엘리먼트 생성 코드는 남겨두도록 하죠.</p>
<h3>DOM 엘리먼트 랜더링</h3>
<p>다음 단계는 엘리먼트와 그 자식을 dom에 랜더링하는 것 입니다. 우리는 하나의 엘리먼트와 dom 컨테이너를 받는 <code class="language-text">render</code> 함수(<code class="language-text">ReactDOM.render</code> 와 동일한)를 사용합니다. 이 함수는 엘리먼트에 정의된 대로 DOM 하위 트리를 만들어 컨테이너에 추가할 것 입니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> parentDom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> props <span class="token punctuation">}</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
  <span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> childElements <span class="token operator">=</span> props<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  childElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">childElement</span> <span class="token operator">=></span> <span class="token function">render</span><span class="token punctuation">(</span>childElement<span class="token punctuation">,</span> dom<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  parentDom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><a href="https://gist.github.com/pomber/1ceaa171a8c7702ab01e8b8c9b604012#file-render-js">gist</a></p>
<p>여전히 속성(properties)과 이벤트 리스너가 없습니다. 그럼 props 속성 이름들을 <code class="language-text">Object.keys</code> 함수로 반복하여 적절히 설정해 보겠습니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> parentDom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> props <span class="token punctuation">}</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
  <span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">isListener</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=></span> name<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"on"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isListener<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> eventType <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> props<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">isAttribute</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=></span> <span class="token operator">!</span><span class="token function">isListener</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> name <span class="token operator">!=</span> <span class="token string">"children"</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isAttribute<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    dom<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> props<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> childElements <span class="token operator">=</span> props<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  childElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">childElement</span> <span class="token operator">=></span> <span class="token function">render</span><span class="token punctuation">(</span>childElement<span class="token punctuation">,</span> dom<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  parentDom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><a href="https://gist.github.com/pomber/57230d30dd86176b90cf39eabfc79192#file-render-js">gist</a></p>
<h3>DOM 텍스트 노드 랜더링</h3>
<p>render 함수가 아직 지원하지 않는 한가지는 텍스트 노드입니다. 먼저 텍스트 엘리먼트의 모양을 정의해야 합니다, 예를 들어, <span>Foo</span> 엘리먼트는 리액트에서 아래와 같이 작성할 수 있습니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> reactElement <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"span"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Foo"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p><a href="https://gist.github.com/pomber/7febeae1067e68629e48ce984b7479a5#file-react-text-element-js">gist</a></p>
<p>자식은 다른 엘리먼트 객체가 아니라 단순히 문자열이라는 점에 유의하세요. 이는 우리가 정의한 Didact 엘리먼트들(:children)에 위배되니, 엘리먼트들의 배열과 모든 엘리먼트는 <code class="language-text">type</code>과 <code class="language-text">props</code>를 가져야합니다. 이러한 규칙을 따른다면, 추후에 조건 문(<code class="language-text">if</code>)을 적게 사용할 수 있을 것 입니다. 따라서 아래와 Didact 텍스트 엘리먼트의 <code class="language-text">type</code>은 <code class="language-text">"TEXT ELEMENT"</code>고, 실제 텍스트는 <code class="language-text">nodeValue</code> 속성에 포함합니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> textElement <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"span"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"TEXT ELEMENT"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">nodeValue</span><span class="token operator">:</span> <span class="token string">"Foo"</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p><a href="https://gist.github.com/pomber/1952cc24b8dd70c3e3f8a06a4000f72f#file-didact-text-element-js">gist</a></p>
<p>텍스트 엘리먼트가 어떻게 렌더링 되는지 정의했습니다. 다른 엘리먼트와의 차이점은 텍스트 엘리먼트는 <code class="language-text">createElement</code>를 사용하는 대신 <code class="language-text">createTextNode</code>를 사용해야한다는 것입니다. 즉, <code class="language-text">nodeValue</code>는 다른 속성들(properties)과 같은 방식으로 설정됩니다.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> parentDom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> props <span class="token punctuation">}</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>

  <span class="token comment">// Create DOM element</span>
  <span class="token keyword">const</span> isTextElement <span class="token operator">=</span> type <span class="token operator">===</span> <span class="token string">"TEXT ELEMENT"</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dom <span class="token operator">=</span> isTextElement
    <span class="token operator">?</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Add event listeners</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isListener</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=></span> name<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"on"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isListener<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> eventType <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> props<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Set properties</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isAttribute</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=></span> <span class="token operator">!</span><span class="token function">isListener</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> name <span class="token operator">!=</span> <span class="token string">"children"</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isAttribute<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    dom<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> props<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Render children</span>
  <span class="token keyword">const</span> childElements <span class="token operator">=</span> props<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  childElements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">childElement</span> <span class="token operator">=></span> <span class="token function">render</span><span class="token punctuation">(</span>childElement<span class="token punctuation">,</span> dom<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Append to parent</span>
  parentDom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><a href="https://gist.github.com/pomber/b7cd21f45709482b5728b7540f0e98ed#file-render-js">gist</a></p>
<h3>요약</h3>
<p>엘리먼트를 DOM에 자식으로 렌더링 할 수 있게 해주는 <code class="language-text">render</code> 함수를 만들었습니다. 다음으로 필요한 것은 엘리먼트를 만드는 쉬운 방법입니다. 다음 포스팅에서는 JSX를 Didact와 함께 사용할 수 있도록 만들어보겠습니다.</p>
<p>지금까지 작성한 코드를 돌려보길 원하면 <a href="https://codepen.io/pomber/pen/eWbwBq?editors=0010">codepen</a>을 확인하거나, <a href="https://github.com/hexacta/didact/commit/fc4d360d91a1e68f0442d39dbce5b9cca5a08f24">github 레포에서 차이점</a>을 확인할 수도 있습니다</p>
<p>다음 포스트: <a href="https://engineering.hexacta.com/didact-element-creation-and-jsx-d05171c55c56">엘리먼트 생성과 JSX</a></p>
<p>읽어 주셔서 감사합니다.</p>
<hr>
<p>저는 <a href="https://www.hexacta.com/?hil">Hexacta</a>에서 여러가지를 만들고있습니다.
아이디어가 있거나 저희를 도울 수 있다면 <a href="https://www.hexacta.com/contact/?hil">연락</a>주세요.</p>
<hr>
<p><a href="https://engineering.hexacta.com/didact-learning-how-react-works-by-building-it-from-scratch-51007984e5c5">출처</a>, <a href="https://github.com/pomber/didact">소스코드</a></p></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-WJH7T7BG1J', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/번역-Didact-DOM-요소Elements-렌더링하기";window.___webpackCompilationHash="58715758d3413ff85ad4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6f81d94acc65468c1004.js"],"app":["/app-1301b2c1ce1e6083a99e.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-e90e1f1a33ed14102c37.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-5192f944eb0cdbaead3e.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-758a4b63320540c0b598.js"]};/*]]>*/</script><script src="/polyfill-6f81d94acc65468c1004.js" nomodule=""></script><script src="/app-1301b2c1ce1e6083a99e.js" async=""></script><script src="/framework-97d5fbb8479584039b04.js" async=""></script><script src="/webpack-runtime-836278bcd2660a45111e.js" async=""></script></body></html>